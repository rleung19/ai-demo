# Design: KPI Detail Pages

## Context
The AI/ML Executive Dashboard requires detailed drill-down views for 10 Leading AI/ML KPIs designed for B2C Fashion E-commerce executives (CFO, COO, CMO). These KPIs are **forward-looking, predictive indicators** that enable proactive decision-making 30-90 days before business outcomes materialize.

**Phase 1 Implementation Scope:**
This first iteration is a **clickable frontend demo** that demonstrates the UI/UX and user flows without actual machine learning implementation. The demo will:
- Use pre-generated synthetic data that simulates ML predictions
- Display AI model information as static metadata (no actual model inference)
- Show realistic KPI values and trends based on specifications
- Enable full interaction and navigation through all 10 KPI detail modals
- Serve as a proof-of-concept for stakeholder review before ML implementation

**Industry Context:**
- B2C Fashion, Cosmetics & Accessories (similar to ASOS, NET-A-PORTER)
- $200M annual revenue, ~500,000 active customers, ~15,000 active SKUs
- ~1.2M orders/year, Average Order Value (AOV): $85-120

**KPI Characteristics:**
- Each KPI is predictive (not just historical reporting)
- Each has a specific prediction horizon (3-180 days)
- Each is owned by specific executive roles (CFO/COO/CMO)
- Each uses specific AI/ML techniques (XGBoost, Prophet, LSTM, NLP, etc.)
- Each has quantified business impact ranges documented

**Executive Needs:**
- CFO: Unit economics, cash flow, working capital, marketing efficiency
- COO: Operational efficiency, supply chain, inventory, fulfillment
- CMO: Customer acquisition, retention, engagement, channel performance

Each KPI detail modal must show not just current metrics, but predictive forecasts, root cause analysis, intervention recommendations, and quantified business impact to enable executives to take action while there's still time to influence outcomes.

## Goals / Non-Goals

### Goals
- Provide comprehensive drill-down analysis for each of the 10 Leading AI/ML KPIs
- Display forward-looking, predictive insights (not just historical data)
- Show actionable interventions with quantified business impact
- Display AI model confidence, methodology, and data sources
- Enable executives (CFO/COO/CMO) to understand unit economics and ROI
- Support role-based decision-making with clear ownership and authority
- Maintain consistent UI/UX across all 10 KPI modals
- Support responsive design for mobile and desktop
- Reflect B2C fashion e-commerce context in synthetic data and examples

### Non-Goals (Phase 1)
- Actual ML model training or inference (using pre-generated synthetic data)
- Real-time data integration or API calls (static data files only)
- User authentication or role-based access control
- Data export functionality (CSV/PDF placeholders only)
- Real-time updates or WebSocket connections
- Multi-language support
- Backend services or ML model serving infrastructure

## Decisions

### Decision: Modal-Based Architecture
**What**: Use modal overlays for KPI detail views instead of separate pages or side panels.

**Why**: 
- Keeps users in context of the main dashboard
- Allows quick access and dismissal
- Consistent with modern dashboard patterns
- Better for mobile responsiveness

**Alternatives considered**:
- Separate detail pages: Would require navigation, loses context
- Side panel: Limited width, harder to show complex charts
- Accordion expansion: Too much vertical space, harder to scan

### Decision: Chart.js for Visualizations
**What**: Use Chart.js v4+ for all chart visualizations.

**Why**:
- Mature, well-documented library
- Good React integration via react-chartjs-2
- Supports all required chart types (line, bar, area, etc.)
- Customizable styling to match design system
- Responsive by default

**Alternatives considered**:
- Recharts: Less mature, smaller community
- D3.js: Too low-level, more development time
- Custom SVG: Too much effort for demo project

### Decision: Pre-Generated Synthetic Data (No ML Implementation)
**What**: Use static TypeScript/JSON data files with pre-calculated synthetic values matching B2C fashion e-commerce context ($200M revenue, 500K customers, 15K SKUs, 1.2M orders/year, AOV $85-120). Data simulates ML predictions but is not generated by actual models.

**Why**:
- Phase 1 is a frontend demo - no ML infrastructure needed
- Allows showcasing all UI/UX features without backend dependencies
- Realistic enough to demonstrate value and business context
- Matches specification requirements exactly
- Reflects industry benchmarks (similar to ASOS, NET-A-PORTER scale)
- Enables demonstration of predictive scenarios and quantified impacts
- Fast to implement and iterate on design
- Can be replaced with real ML API calls in future phases

**Alternatives considered**:
- Mock API endpoints: Adds complexity without benefit for Phase 1
- Real ML model implementation: Out of scope for first iteration
- Real API integration: Out of scope for demo

### Decision: Component Composition Pattern
**What**: Build reusable components (MetricCard, DataTable, ChartWrapper) and compose KPI-specific modals.

**Why**:
- Reduces code duplication across 10 KPIs
- Easier to maintain and update
- Consistent UI/UX
- Faster development

**Alternatives considered**:
- Single monolithic modal component: Too complex, hard to maintain
- Completely separate components per KPI: Too much duplication

### Decision: TypeScript Strict Mode
**What**: Use TypeScript with strict mode for all new components and data structures.

**Why**:
- Project convention (from project.md)
- Better type safety for complex data structures
- Easier refactoring
- Better IDE support

## Risks / Trade-offs

### Risk: Chart Performance with Large Datasets
**Mitigation**: Limit data points to reasonable ranges (e.g., 12 weeks for trends). Use data aggregation for large tables.

### Risk: Modal Complexity Across 10 KPIs
**Mitigation**: Use consistent component structure. Create KPI configuration objects to drive modal content.

### Risk: Synthetic Data Maintenance
**Mitigation**: Centralize data generation in dedicated modules. Use seed values for reproducibility.

### Trade-off: Modal Width (1000px max)
**Benefit**: Good for desktop, shows more information
**Cost**: May be tight on smaller screens
**Mitigation**: Responsive design with mobile breakpoints

## Migration Plan
N/A - This is a new feature, not a migration.

## Open Questions
- Should modals support deep linking (URL hash for specific KPI)?
- Should we cache modal data or regenerate on each open?
- Should we add animation preferences (reduce motion)?

